<!doctype html>	
<html ng-app>
<head>
	<title>All answers</title>
	<script type="text/javascript" src="../external_libs/jquery.min.js"></script>
	<script type="text/javascript" src="../external_libs/angular.min.js"></script>
	<script type="text/javascript" src="../external_libs/bootstrap/js/bootstrap.js"></script>
	<script type="text/javascript" src="../js/controllers.js"></script>
	<link href="../css/bootstrapModify.css" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="../external_libs/bootstrap/css/bootstrap.min.css">
</head>
<body>
	<div ng-controller="AnswerCtrl as ctrl">
		<table class="table table-hover">
			<thead>
				<tr>
					<th>Id</th>
					<th>Sivilstatus</th>
					<th>På hodet</th>
					<th>Alder</th>
					<th>Studiested</th>
					<th>Programmeringsstil</th>
					<th>Musikk</th>
					<th>Personlighet</th>
					<th>Hype-preferanse</th>
					<th>Favorittgode</th>
					<th>Planer for kvelden</th>
					<th>Premie hvis du vinner</th>
					<th>Kjønn</th>
				</tr>
			</thead>
			<tbody>
				<tr ng-repeat="answer in answers | orderBy:['processed', 'id_answers']" ng-class="{warning: answer.locked === 1, danger : answer.processed === 0 && answer.locked === 0, success : answer.processed === 1 && answer.locked === 0}">
					<td>{{answer.id_answers}}</td>
					<td>{{answer.sivilstatus}}</td>
					<td>{{answer.pa_hodet}}</td>
					<td>{{answer.alder}}</td>
					<td>{{answer.studiested}}</td>
					<td>{{answer.programmeringsstil}}</td>
					<td>{{answer.musikk}}</td>
					<td>{{answer.personlighet}}</td>
					<td>{{answer.hypepreferanse}}</td>
					<td>{{answer.favorittgode}}</td>
					<td>{{answer.planerforkvelden}}</td>
					<td>{{answer.premiehvisduvinner}}</td>
					<td>{{answer.kjonn}}</td>
					<td>
						
						<!-- Button trigger modal -->
						<button class="btn btn-primary" data-toggle="modal" data-target="#myModal{{answer.id_answers}}" ng-click="getAnswer(answer.id_answers)">
							Behandle svar
						</button>

						<!-- Modal -->
						<div class="modal fade" id="myModal{{answer.id_answers}}" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
							<div class="modal-dialog">
								<div class="modal-content">
									<div ng-class = "{'modal-header': true, 'modal-custom-female': oneAnswer.kjonn==='kvinne', 'modal-custom-male': oneAnswer.kjonn ==='mann'}">
										<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
										<h4 class="modal-title" id="myModalLabel">Svar: {{oneAnswer.id_answers}}</h4>
									</div>
									<div ng-show="oneAnswer.locked === 0" ng-class="modal-body">
										<b>Sivilstatus:</b> {{oneAnswer.sivilstatus}}<br>
										<b>På hodet: </b> {{oneAnswer.pa_hodet}}<br>
										<b>Alder: </b> {{oneAnswer.alder}}<br>
										<b>Studiested: </b> {{oneAnswer.studiested}}<br>
										<b>Programmeringsstil: </b> {{oneAnswer.programmeringsstil}}<br>
										<b>Musikk: </b> {{oneAnswer.musikk}}<br>
										<b>Personlighet: </b> {{oneAnswer.personlighet}}<br>
										<b>Hype-preferanse: </b> {{oneAnswer.hypepreferanse}}<br>
										<b>Favorittgode: </b> {{oneAnswer.favorittgode}}<br>
										<b>Planer for kvelden: </b> {{oneAnswer.planerforkvelden}}<br>
										<b>Premie hvis du vinner: </b> {{oneAnswer.premiehvisduvinner}}<br>
										<b>Locked: </b> {{oneAnswer.locked}}<br>
									</div>
									<div ng-show="oneAnswer.locked === 1" class="modal-body">
										Dette svaret er låst.
									</div>
									<div class="modal-footer">
										<div>
											<form  ng-show="oneAnswer.locked === 0" action="{{'/updateAnswerStatus/' + answer.id_answers}}" method="post">
												<button ng-show="oneAnswer.processed === 0" type="submit" class="btn btn-primary" >Merk som behandlet</button>
												<button ng-show="oneAnswer.processed === 1" type="submit" class="btn btn-primary" >Merk som ubehandlet</button>
											</form>
											<form action="{{'/toggleLockAnswerRedirect/' + answer.id_answers}}" method="get">
												<button ng-show="oneAnswer.locked === 0" type="submit" class="btn btn-default">Lukk</button>
												<button ng-show="oneAnswer.locked === 1" type="submit" class="btn btn-primary">Lås opp</button>
											</form>
											<form ng-show="oneAnswer.locked === 1" action="/public/html/allAnswers.html" method="get">
												<button type="submit" class="btn btn-default">Lukk</button>
											</form>
										</div>
									</div>
								</div>
							</div>
						</div>
					</td>
				</tr>
			</tbody>
		</table>
		<form action="/public/html/index.html" method="get">
			<button type="submit" button name="backToMenu" class="btn btn-primary">
				<span class="glyphicon glyphicon-home">
				</span>
				Tilbake til meny
			</button>
		</form>
	</div>
</body>
</html>